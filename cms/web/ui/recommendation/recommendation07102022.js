var hname=window.location.hostname;hname="www"==hname.substr(0,3)?hname.substring(3,hname.length):"."+hname;var queryList={50:"rvts_top_seller",60:"rvts_price_drop",70:"rvts_new_product",80:"rvts_back_in_stock",90:"rvts_buy_also",100:"rvts_similar",110:"rvts_you_might",120:"rvts_view_also",130:"rvts_recently",140:"rvts_trending"},typeList={50:"topseller",60:"pricedrop",70:"newproduct",80:"backinstock",90:"buyalso",100:"similar",110:"youmight",120:"viewalso",130:"recently",140:"trending"},custId=rvtsRecommendationObj.rvts_customer_id;function get_cookie(e){for(var t=e+"=",r=decodeURIComponent(document.cookie).split(";"),n=0;n<r.length;n++){for(var c=r[n];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(t))return c.substring(t.length,c.length)}return""}function set_cookie(e,t,r,n){var c="";if(r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3),c="; expires="+o.toUTCString()}document.cookie=e+"="+(t||"")+c+";domain="+n+"; path=/"}function saveProductToCookie(e){var t,r="rvts_product_history_array";(cookie=get_cookie(r))?((t=JSON.parse(cookie)).unshift([e]),t.length>10&&(t.length=10),set_cookie(r,JSON.stringify(t),10,hname)):((t=[]).push([e]),set_cookie(r,JSON.stringify(t),10,hname))}function getProductsFromCookie(e){return(products=get_cookie("rvts_product_history_array"))?JSON.parse(products):[]}if(window.PRODUCT_DATA&&1==PRODUCT_DATA.length){var currentProduct=PRODUCT_DATA[0];(product={}).p_id=currentProduct.id,product.category_id=currentProduct.category_ids,product.name=currentProduct.name,product.image_link=currentProduct.image,product.product_price=currentProduct.total_base_price.toFixed(2)+" "+currentProduct.currency,product.product_sales_price=currentProduct.total_sale_price.toFixed(2)+" "+currentProduct.currency,product.link=window.location.href,saveProductToCookie(product)}else if(window.productDetailModel){var product;currentProduct=productDetailModel;(product={}).p_id=currentProduct.productId,product.category_id=currentProduct.productCategoryId,product.name=currentProduct.productName,product.image_link=window.location.origin+currentProduct.productImages[0].imagePath,product.product_price=currentProduct.productPriceKDVIncluded.toFixed(2)+" "+currentProduct.productCurrency,product.product_sales_price=currentProduct.productPrice.toFixed(2)+" "+currentProduct.productCurrency,product.link=window.location.href,saveProductToCookie(product)}function saveActivity(e,t){var r=get_cookie("revotas_web_push_user"),n=get_cookie("rvts_token"),c=get_cookie("rvts_email"),o="cust_id="+custId+"&recommendation_type="+t+"&url="+window.location.href+"&user_agent="+navigator.userAgent+"&activity_type="+e;r&&(o+="&user_id="+r),n&&(o+="&token="+n),c&&(o+="&email="+c),fetch("https://f.revotas.com/frm/recommendation/save_recommendation_activity.jsp?"+o)}function fillContainer(e,t,r,n){var c,o,i,d,s=document.querySelector("."+e);if(!s)throw new Error("Invalid query selector: "+e);if(!t||0==t.length)throw new Error("Empty list");new Promise(function(t,r){!function r(){var n=document.createElement("div");n.classList.add(e+"-container__element"),n.style.display="none",document.body.appendChild(n),o=getComputedStyle(n).width,o=parseInt(o.substr(0,o.length-2)),i=getComputedStyle(n).marginLeft,i=parseInt(i.substr(0,i.length-2)),d=getComputedStyle(n).borderWidth,d=parseInt(d.substr(0,d.length-2)),document.body.removeChild(n),0==i?setTimeout(r,500):t()}()}).then(function(){var a=o+i+2*d,u=[],l=document.createElement("div");l.classList.add(e+"-header"),l.innerHTML=r;var p=document.createElement("div");p.classList.add(e+"-container"),p.style.left="0px";var m=document.createElement("div");m.classList.add(e+"-container__flex"),t.forEach(function(t,r){var c=document.createElement("div");c.addEventListener("click",function(){window.open(t.link+"?utm_source=revotas&utm_medium=reco&utm_campaign="+typeList[n],"_blank"),saveActivity(1,n)}),c.classList.add(e+"-container__element"),0==r&&c.classList.add("current"),m.appendChild(c),u.push(c);var o=document.createElement("div");o.classList.add(e+"-container__element_image"),c.appendChild(o);var i=document.createElement("img");i.src=t.image_link,o.appendChild(i);var d=document.createElement("div");d.classList.add(e+"-container__element_name"),t.product_sales_price||d.classList.add("original-price"),d.innerHTML=t.name,c.appendChild(d);var s=document.createElement("div");if(s.classList.add(e+"-container__element_price"),t.product_sales_price||s.classList.add("original-price"),s.innerText=t.product_price,c.appendChild(s),t.product_sales_price){var a=document.createElement("div");a.classList.add(e+"-container__element_sales_price"),a.innerText=t.product_sales_price,c.appendChild(a)}}),p.appendChild(m);var _=document.createElement("div"),h=document.createElement("div");_.classList.add(e+"_buttons__left"),h.classList.add(e+"_buttons__right");var v=document.createElement("img"),f=document.createElement("img");_.appendChild(v),h.appendChild(f);var g=t.length;function y(e){var t,r=0;return u.forEach(function(e){e.classList.contains("current")&&(t=r),r++}),"right"==e?t==g-c?(u[t].classList.remove("current"),u[0].classList.add("current")):(u[t].classList.remove("current"),u[t+1].classList.add("current")):"left"==e&&(0==t?(u[t].classList.remove("current"),u[g-c].classList.add("current")):(u[t].classList.remove("current"),u[t-1].classList.add("current"))),t}m.style.width=o*g+i*(g+1)+2*g*d+"px",s.style.display="block",s.appendChild(l),s.appendChild(p),s.appendChild(_),s.appendChild(h),document.querySelector("."+e+"_buttons__left").addEventListener("click",shiftLeft=function(){var t=document.querySelector("."+e+"-container"),r=t.style.left;r=parseInt(r.substr(0,r.length-2)),r+=a,t.style.left=r+"px",0==y("left")&&(t.style.left=(c-g)*a+"px")}),document.querySelector("."+e+"_buttons__right").addEventListener("click",shiftRight=function(){var t=document.querySelector("."+e+"-container"),r=t.style.left;r=parseInt(r.substr(0,r.length-2)),r-=a,t.style.left=r+"px",y("right")==g-c&&(t.style.left="0px")}),setInterval(shiftRight,3e3),window.addEventListener("resize",resizeFunc=function(e){var r;r=e?e.target.innerWidth:window.innerWidth,(c=Math.round(r/Math.round((o*g+i*(g+1)+2*g*d)/g))-1)>t.length&&(c=t.length),s.style.width=o*c+i*(c+1)+2*c*d+"px";var n,a=0;if(u.forEach(function(e){e.classList.contains("current")&&(n=a),a++}),g-n<c)for(var l=g-n;l<c;l++)shiftLeft()}),resizeFunc(),saveActivity(0,n)})}function getConfigs(e){fetch("https://f.revotas.com/frm/recommendation/get_recommendation_config.jsp?cust_id="+e).then(function(e){return e.json()}).then(function(t){t.forEach(function(t){fetchProducts(e,t)})})}function fetchProducts(e,t){document.querySelector("."+t.selector)&&(t.cssLinks.split(",").forEach(function(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.head.appendChild(t)}),130==t.type?fillContainer(t.selector,getProductsFromCookie(t.limit),t.title,t.type):fetch("https://"+t.rcp+"/rrcp/imc/recommendation/get_recommendation.jsp?cust_id="+e+"&type="+t.type+(t.limit?"&limit="+t.limit:"")).then(function(e){return e.json()}).then(function(e){e=(e=e.filter(function(e){return null!=e})).map(function(e){return e[0]}),fillContainer(t.selector,e,t.title,t.type)}))}getConfigs(custId);
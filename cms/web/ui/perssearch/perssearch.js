var rvtsPersSearchCode=40;void 0!==window.rvtsUTMTrackerAdded&&window.rvtsUTMTrackerAdded!==rvtsPersSearchCode||(!function(){var e=document.getElementsByTagName("script")[0],t=document.createElement("script");t.type="text/javascript",t.async="true",t.src="https://l.revotas.com/trc/api/rvts_tracker.js",e.parentNode.insertBefore(t,e)}(),window.rvtsUTMTrackerAdded=rvtsPersSearchCode),void 0!==window.rvtsOrderTrackerAdded&&window.rvtsOrderTrackerAdded!==rvtsPersSearchCode||(!function(){var e=document.getElementsByTagName("script")[0],t=document.createElement("script");t.type="text/javascript",t.async="true",t.src="https://l.revotas.com/trc/api/rvts_order_tracker.js",e.parentNode.insertBefore(t,e)}(),window.rvtsOrderTrackerAdded=rvtsPersSearchCode),void 0!==window.rvtsActivityTrackerAdded&&window.rvtsActivityTrackerAdded!==rvtsPersSearchCode||(!function(){var e=document.getElementsByTagName("script")[0],t=document.createElement("script");t.type="text/javascript",t.async="true",t.src="https://l.revotas.com/trc/api/rvts_activity_tracker.js",e.parentNode.insertBefore(t,e)}(),window.rvtsActivityTrackerAdded=rvtsPersSearchCode);var psSessionConfigResolver=null,psSessionConfig=new Promise((e,t)=>{psSessionConfigResolver=e,sessionStorage.getItem("ps_session_config")&&e(sessionStorage.getItem("ps_session_config"))}),psSessionConfigSet=!1;function initializeRvtsPersSearch(){if(window.rvtsPersSearchArray&&rvtsPersSearchArray.length>0){var e=rvtsPersSearchArray[0].rvts_customer_id;psSessionConfig.then(t=>{if(t){var r=(t=JSON.parse(t)).object,n=t.status,a=t.rcp_link;if(1===n){var s=decodeConfigs(r);Array.from(document.querySelectorAll(s.inputSelector)).forEach(t=>{rvtsPersonalizedSearch(s,e,t,a)})}}else fetch("https://f.revotas.com/frm/perssearch/get_perssearch_config.jsp?cust_id="+e).then(e=>e.json()).then(t=>{sessionStorage.setItem("ps_session_config",JSON.stringify(t));var r=t.object,n=t.status,a=t.rcp_link;if(1===n){var s=decodeConfigs(r);Array.from(document.querySelectorAll(s.inputSelector)).forEach(t=>{rvtsPersonalizedSearch(s,e,t,a)})}})})}}function decodeConfigs(e){for(var t in e)"categories"===t?e[t]=e[t].map(e=>({name:decodeURIComponent(e.name),link:decodeURIComponent(e.link),pinned:decodeURIComponent(e.pinned)})):"synonyms"===t?e[t]=e[t].map(e=>({original:decodeURIComponent(e.original),synonym:decodeURIComponent(e.synonym)})):"redirects"===t?e[t]=e[t].map(e=>({query:decodeURIComponent(e.query),link:decodeURIComponent(e.link)})):"recommendedQueries"===t?e[t]=e[t].map(e=>decodeURIComponent(e)):"filterConfigs"!==t&&"currencyConfigs"!==t&&(e[t]=decodeURIComponent(e[t]));return e}function rvtsPersonalizedSearch(searchConfig,custId,input,rcp_link){var sortParam=searchConfig.sortCriteria?searchConfig.sortCriteria:"date";input.value="";var submitButton=null;searchConfig.submitSelector&&(submitButton=eval(searchConfig.submitSelector));var backupProductList=null,search_request_object={sortParam:sortParam,searchParam:""},ACTIVITY_SEARCH=3,ACTIVITY_CLICK=4,resultCount=0;function generateSessionId(){return[...Array(30)].map(e=>(~~(36*Math.random())).toString(36)).join("")}var rvtsSessionId=null,swSessionIdResolver=null,swSessionId=new Promise((e,t)=>{swSessionIdResolver=e,sessionStorage.getItem("rvts_session_id")&&e(sessionStorage.getItem("rvts_session_id"))});swSessionId.then(function(e){rvtsSessionId=e,sessionStorage.setItem("rvts_session_id",e)});var rvtsSessionIdSet=!1;window.addEventListener("storage",function(e){if("get_rvts_session_id"===e.key&&e.newValue){var t=sessionStorage.getItem("rvts_session_id");t&&(localStorage.setItem("rvts_local_session_id",t),localStorage.removeItem("rvts_local_session_id"))}"rvts_local_session_id"===e.key&&e.newValue&&!rvtsSessionIdSet&&(sessionStorage.setItem("rvts_session_id",e.newValue),rvtsSessionIdSet=!0,swSessionIdResolver(e.newValue))}),localStorage.setItem("get_rvts_session_id","get"),localStorage.removeItem("get_rvts_session_id"),setTimeout(()=>{swSessionIdResolver(generateSessionId())},250);var currencyConfig=null;function mouseEnterWithDelay(e,t,r){var n=null;e.addEventListener("mouseenter",function(){n=setTimeout(()=>t.call(this),r)}),e.addEventListener("mouseleave",function(){clearTimeout(n)})}function keyReleaseUtil(e){var t=!1,r=null;return{hit:()=>{t=!0,r&&(clearTimeout(r),r=null)},release:n=>{t&&(r=setTimeout(()=>{t=!1,e(n)},250))}}}function numberToFixed(e,t){var r=(e=e.toString()).indexOf(".");if(-1!==r)if(0==t)e=e.substring(0,r);else{var n=(e=e.split("").filter((e,n)=>r+t>=n).join("")).length-r-1;t>n&&(e=e.concat(Array.apply(null,Array(t-n)).map(Number.prototype.valueOf,0).join("")))}else t>0&&(e=(e=e.concat(["."])).concat(Array.apply(null,Array(t)).map(Number.prototype.valueOf,0).join("")));return e}function formatCurrency(e,t){var r=e;try{e=(e=(e=e.toString()).replace(/[^0-9.,]/g,"")).split(",").join("."),e=parseFloat(e);var n=t.format.indexOf(","),a=t.format.indexOf("."),s=n<a?",":".",i=n<a?".":",";-1!==n&&-1!==a||(s="");var o=2===(e=numberToFixed(e,t.format.length-t.format.indexOf(i)-1)).split(".").length?e.split("."):e.split(","),c=o[0],l=o[1]?o[1]:"",d=(c=(c=c.split("").reverse()).map((e,t)=>(t+1)%3==0&&c.length>t+1?s+e:e).reverse().join(""))+(l?i+l:"");return"EN"===t.language?d=t.currency+d:"TR"===t.language&&(d=d+" "+t.currency),d}catch(e){return r}}function replaceWord(e,t,r){if(!e)return e;t=t.toLowerCase(),r=r.toLowerCase();var n=e.toLowerCase();if(0===n.length)return e;for(var a=n.length-t.length,s=[],i=0;i<=a;i++){if(n.substr(i,t.length)===t){var o=i>0?i-1:0,c=t.length+(i>0?2:1),l=n.substr(o,c);l.trim()===t&&s.push([l,l.replace(t,r)])}}return s.forEach(e=>n=n.replace(e[0],e[1])),n}searchConfig.currencyConfigs&&(currencyConfig=searchConfig.currencyConfigs.filter(e=>1==e.active)[0]);var newStyle=document.createElement("style");newStyle.innerHTML=searchConfig.css,document.head.appendChild(newStyle);var hname=window.location.hostname;"www"==hname.substr(0,3)&&(hname=hname.substring(3,hname.length));var maxZIndex=1073741823,filterBox=(filterListArray=[],callbackFn=null,{createFilter:function(e){function t(){return[...Array(10)].map(e=>(~~(36*Math.random())).toString(36)).join("")}var r=null,n=e.name,a=e.title,s=e.type,i=document.createElement("div");i.classList.add("rvts_personalized_search_main-filter");var o=null,c=null,l=null,d={},u=document.createElement("div");t(),u.innerHTML="<span>"+decodeURIComponent(a)+'</span><div class="rvts_personalized_search_main-filter-search-icon"><img src="https://l.revotas.com/trc/perssearch/searchicon.png"></div>';var p=u.querySelector("div");p.addEventListener("click",()=>{r=!0,"function"==typeof callbackFn&&callbackFn.call(i,filterListArray)}),u.querySelector("span").addEventListener("click",()=>{m.classList.contains("rvts_personalized_search_main-filter-expand-"+s)?m.classList.remove("rvts_personalized_search_main-filter-expand-"+s):m.classList.add("rvts_personalized_search_main-filter-expand-"+s)}),i.appendChild(u);var m=document.createElement("div");if(m.style.height=0,m.classList.add("rvts_personalized_search_main-filter-"+s),"select"===s){r=!0,p.style.display="none";var h=document.createElement("div");h.innerHTML='<input type="text">',h.querySelector("input").addEventListener("keyup",e=>{var t=e.target.value.toLocaleLowerCase();l.forEach(e=>e.style.display=""),l.filter(e=>!e.querySelector("label").innerText.toLocaleLowerCase().includes(t)).forEach(e=>e.style.display="none")});var v=document.createElement("div");m.appendChild(h),m.appendChild(v),l=e.list.map(e=>{var r=decodeURIComponent(e.string),a=decodeURIComponent(e.meta);a||(a=n);var s=t(),o=document.createElement("div");return o.classList.add("rvts_personalized_search_main-filter-item"),o.innerHTML='<input meta="'+a+'" id="'+s+'" type="checkbox"><label for="'+s+'">'+r+"</label>",o.querySelector("input").addEventListener("change",()=>{"function"==typeof callbackFn&&callbackFn.call(i,filterListArray)}),v.appendChild(o),d[encodeURIComponent(r)+"_"+encodeURIComponent(a)]=o.querySelector("input"),o}),i.appendChild(m),l.length<10&&(h.style.display="none")}else if("range"===s){r=!1,(o=document.createElement("input")).type="number";var f=document.createElement("span");f.innerText="-",(c=document.createElement("input")).type="number",m.appendChild(o),m.appendChild(f),m.appendChild(c),e.range&&(o.value=e.range[0],c.value=e.range[1]),i.appendChild(m)}var g=function(){return l?r&&{name:n,type:s,list:l.filter(e=>e.querySelector("input").checked).map(e=>({string:e.querySelector("label").innerText,meta:e.querySelector("input").getAttribute("meta")}))}:o&&c?r&&{name:n,type:s,range:[o.value,c.value]}:void 0},_={getValues:g,getFilters:function(){if(l)return l.filter(e=>e.querySelector("input").checked).map(e=>{var t=document.createElement("div");return t.classList.add("rvts_personalized_search_main-filter-element"),t.innerHTML="<span>"+e.querySelector("label").innerText+"</span><span>x</span>",t.children[1].addEventListener("click",()=>{e.querySelector("input").checked=!1,t.remove(),"function"==typeof callbackFn&&callbackFn.call(i,filterListArray)}),t.filterValues=g(),t});if(o&&c){var e=document.createElement("div");return e.classList.add("rvts_personalized_search_main-filter-element"),e.innerHTML="<span>"+o.value+" - "+c.value+"</span><span>x</span>",e.children[1].addEventListener("click",()=>{e.remove(),r=!1,"function"==typeof callbackFn&&callbackFn.call(i,filterListArray)}),e.filterValues=g(),r?[e]:[]}},element:i};return filterListArray.push(_),_},getFilterList:()=>filterListArray,subscribe:function(e){callbackFn=e}}),filterListArray,callbackFn;function convertProductFormat(e){var t={p_id:e.productID,name:e.productName,image_link:e.imageLink,link:e.link,product_price:e.productPrice};return e.productSalesPrice&&(t.product_sales_price=e.productSalesPrice),t}function searchProducts(e,t){e=e.toLowerCase(),searchConfig.synonyms.forEach(t=>{e=replaceWord(e,t.original.toLowerCase(),t.synonym.toLowerCase())}),search_request_object.searchParam=e.split("&").join(encodeURIComponent("&")),965==custId&&search_request_object.searchParam.includes("-")&&(search_request_object.searchParam="\\"+search_request_object.searchParam.split("-").join("\\-"));var r="search";if(e.length<2)return psGetFallbackProducts().then(t=>{return t.length>0?{results:t,type:r,modifiedQuery:e}:{results:psGetProductsFromCookie(),type:r="recently",modifiedQuery:e}});var n=new Date;return fetch("https://"+rcp_link+"/rrcp/imc/perssearch/Search.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"sCustId="+custId+"&search_param="+JSON.stringify(search_request_object)}).then(e=>e.json()).then(a=>{var s=new Date;"undefined"!=typeof rvtsPersSearchDebug&&!0===rvtsPersSearchDebug&&(console.log("Request for '"+e+"' took "+(s.getTime()-n.getTime())+"ms."),console.log("Response: ",a));var i=a.categoryList,o=a.productList;return resultCount=o.length,0===(o=o.map(convertProductFormat)).length?psGetFallbackProducts().then(t=>{return t.length>0?{results:t,type:r,modifiedQuery:e}:{results:psGetProductsFromCookie(),type:r="recently",modifiedQuery:e}}):(t||categories.update(i),{results:o,type:r,modifiedQuery:e})})}function psGetCookie(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var a=r[n];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""}function psSetCookie(e,t,r,n){var a="";if(r){var s=new Date;s.setTime(s.getTime()+24*r*60*60*1e3),a="; expires="+s.toUTCString()}document.cookie=e+"="+(t||"")+a+";domain="+n+"; path=/"}function savePersSource(){psSetCookie("revotas_source","other",7,hname),psSetCookie("revotas_medium","perssearch",7,hname),psSetCookie("revotas_campaign","perssearch",7,hname)}function saveActivity(e,t,r,n){var a=n||window.location.href,s=psGetCookie("revotas_web_push_user"),i=psGetCookie("rvts_token"),o=psGetCookie("rvts_email"),c="cust_id="+t+"&activity_type="+r+"&user_agent="+navigator.userAgent+"&session_id="+rvtsSessionId+"&search_result_count="+resultCount;s&&(c+="&user_id="+s),i&&(c+="&token="+i),o&&(c+="&email="+o),c+="&url="+a,fetch("https://f.revotas.com/frm/perssearch/save_perssearch_activity.jsp?"+c,{method:"POST",headers:{"Content-Type":"application/json"},body:e})}function saveLastSearch(e){if(e=(e=e.trim()).toLowerCase(),""!==(e=encodeURIComponent(e))){var t="rvts_ps_search_list",r=psGetCookie(t);r?(-1===(r=JSON.parse(r)).indexOf(e)&&r.unshift(e),r.length>6&&(r.length=6),psSetCookie(t,JSON.stringify(r),10,hname)):psSetCookie(t,JSON.stringify([e]),10,hname)}}function psSaveProductsToCookie(e){e.date=new Date;var t,r="rvts_product_history_array",n=decodeURIComponent(psGetCookie(r));(n?(localStorage.setItem(r,encodeURIComponent(n)),psSetCookie(r,"",-1,hname)):n=localStorage.getItem(r)?decodeURIComponent(localStorage.getItem(r)):null,n)?(0==(t=JSON.parse(n)).filter(function(t){return t[0].p_id==e.p_id}).length?t.unshift([e]):t=t.map(function(t){return t[0].p_id==e.p_id?[e]:t}),t.length>10&&(t.length=10),localStorage.setItem(r,encodeURIComponent(JSON.stringify(t)))):((t=[]).push([e]),localStorage.setItem(r,encodeURIComponent(JSON.stringify(t))))}!function(){var e=localStorage.getItem("rvts_perssearch_initializer"),t=JSON.parse(decodeURIComponent(e)),r=t?t.date:null;if(r){var n=new Date;n.setHours(0,0,0,0);var a=new Date(r);a.setHours(0,0,0,0),Math.round((n.getTime()-a.getTime())/864e5)>=1&&(e=null)}else e=null;e?setTimeout(function(){e=decodeURIComponent(e);var t=JSON.parse(e);categories.update(t.categoryList),backupProductList=(backupProductList=t.productList).map(convertProductFormat)},1):fetch("https://"+rcp_link+"/rrcp/imc/perssearch/Search.jsp",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"sCustId="+custId+"&search_param="+JSON.stringify(search_request_object)}).then(e=>e.json()).then(e=>{e.date=new Date,localStorage.setItem("rvts_perssearch_initializer",encodeURIComponent(JSON.stringify(e))),categories.update(e.categoryList),backupProductList=(backupProductList=e.productList).map(convertProductFormat)})}(),function(){var e=!1,t="rvts_product_history_array",r=psGetCookie(t);if(r){var n=null;try{n=decodeURIComponent(r)}catch(e){n=r}var a=JSON.parse(n);a=a.map(t=>{var r=t[0],n=r.image_link.indexOf("https:",1);return n>0&&(e=!0,r.image_link=r.image_link.substring(n,r.image_link.length)),t}),e?psSetCookie(t,encodeURIComponent(JSON.stringify(a)),10,hname):n===r&&psSetCookie(t,encodeURIComponent(r),10,hname)}}();var fallbackProductList=[],fallbackFetched=!1;function psGetFallbackProducts(){if(fallbackFetched)return new Promise((e,t)=>e(fallbackProductList));if(searchConfig.fallbackScenario){var e=localStorage.getItem("rvts_perssearch_fallback"),t=JSON.parse(decodeURIComponent(e)),r=t?t.date:null;if(r){var n=new Date;n.setHours(0,0,0,0);var a=new Date(r);a.setHours(0,0,0,0),Math.round((n.getTime()-a.getTime())/864e5)>=1&&(e=null)}else e=null;if(e)return new Promise((t,r)=>{e=decodeURIComponent(e);var n=JSON.parse(e).productList;n=(n=n.filter(e=>null!=e)).map(e=>e[0]),fallbackFetched=!0,fallbackProductList=n,t(n)});var s=searchConfig.fallbackScenario;return fetch("https://"+rcp_link+"/rrcp/imc/recommendation/get_recommendation.jsp?cust_id="+custId+"&type="+s).then(e=>e.json()).then(e=>{var t={productList:e,date:new Date};return localStorage.setItem("rvts_perssearch_fallback",encodeURIComponent(JSON.stringify(t))),e=(e=e.filter(e=>null!=e)).map(e=>e[0]),fallbackFetched=!0,fallbackProductList=e,e}).catch(()=>(localStorage.setItem("rvts_perssearch_fallback",encodeURIComponent(JSON.stringify({productList:[],date:new Date}))),fallbackFetched=!0,fallbackProductList=[],[]))}return localStorage.setItem("rvts_perssearch_fallback",encodeURIComponent(JSON.stringify({productList:[],date:new Date}))),fallbackFetched=!0,fallbackProductList=[],new Promise((e,t)=>e([]))}function psGetProductsFromCookie(){var e="rvts_product_history_array",t=decodeURIComponent(psGetCookie(e));return t?(localStorage.setItem(e,encodeURIComponent(t)),psSetCookie(e,"",-1,hname)):t=localStorage.getItem(e)?decodeURIComponent(localStorage.getItem(e)):null,t?(t=(t=JSON.parse(t)).filter(function(e){if(e[0].date){var t=new Date(e[0].date),r=new Date;return Math.round((r.getTime()-t.getTime())/36e5)<48}return!1}),localStorage.setItem(e,encodeURIComponent(JSON.stringify(t))),(t=t.map(e=>e[0])).length>0?t:backupProductList||[]):backupProductList||[]}if(window.PRODUCT_DATA&&1==PRODUCT_DATA.length){var currentProduct=PRODUCT_DATA[0],product={};product.p_id=currentProduct.id,product.category_id=currentProduct.category_ids,product.name=currentProduct.name,product.image_link=currentProduct.image,product.product_price=currentProduct.total_base_price.toFixed(2)+" "+currentProduct.currency,product.product_sales_price=currentProduct.total_sale_price.toFixed(2)+" "+currentProduct.currency,product.link=window.location.href,psSaveProductsToCookie(product)}else if(window.productDetailModel){var currentProduct=productDetailModel,product={};product.p_id=currentProduct.productId,product.category_id=currentProduct.productCategoryId,product.name=currentProduct.productName,product.image_link=(0!==currentProduct.productImages[0].imagePath.indexOf("https:")?window.location.origin:"")+currentProduct.productImages[0].imagePath,product.product_price=currentProduct.productPriceKDVIncluded.toFixed(2)+" "+currentProduct.productCurrency,product.link=window.location.href,psSaveProductsToCookie(product)}var title=function(e){var t=document.createElement("div");return t.classList.add("rvts_personalized_search-results-title"),t.innerHTML="<span>"+e+"</span>",{element:t,update:e=>{t.innerHTML="<span>"+e+"</span>"},show:()=>{t.style.display=""},hide:()=>{t.style.display="none"}}}(searchConfig.title),lastSearch={};1==searchConfig.showLastSearch&&(lastSearch=function(){var e=document.createElement("div");e.classList.add("rvts_personalized_search_main-last-search"),e.innerHTML="<div>"+searchConfig.lastSearchTitle+"</div>";var t=psGetCookie("rvts_ps_search_list");return t?t=JSON.parse(t):e.style.display="none",e.innerHTML="<div>"+searchConfig.lastSearchTitle+"</div>",t&&t.forEach(t=>{try{t=decodeURIComponent(t)}catch(e){}var r=document.createElement("a");r.href="/"+searchConfig.queryPattern.split("<_Query_>").join(t),r.innerText=t,r.classList.add("rvts_personalized_search_main-last-search-item"),mouseEnterWithDelay(r,()=>{input.value=t,searchProducts(t,!0).then(e=>{var t=e.results,r=e.type;renderResults(t,!0),"search"===r?(title.update(searchConfig.title),footer.hide()):"recently"===r&&(title.update(searchConfig.recentlyViewedTitle),footer.hide()),footer.hide()})},500),r.addEventListener("mouseup",e=>{1!==e.which&&2!==e.which||(saveLastSearch(t),saveActivity(t,custId,ACTIVITY_SEARCH))}),e.appendChild(r)}),{element:e,show:()=>{e.style.display=""},hide:()=>{e.style.display="none"}}}());var categories=function(){var e=document.createElement("div");return e.classList.add("rvts_personalized_search_main-categories"),e.innerHTML="<div>"+searchConfig.categoriesTitle+"</div>",searchConfig.categories.forEach((t,r)=>{if(!(r>=searchConfig.categoriesLimit)){var n=document.createElement("a");n.href=t.link,n.innerText=t.name,n.classList.add("rvts_personalized_search_main-categories-item"),e.appendChild(n)}}),{element:e,show:()=>{e.style.display=""},hide:()=>{e.style.display="none"},update:t=>{if(0!==t.length){var r=t.map(e=>e.categoryName.toLowerCase());e.innerHTML="<div>"+searchConfig.categoriesTitle+"</div>";var n=0;searchConfig.categories.forEach((a,s)=>{if(!(n>=searchConfig.categoriesLimit)&&r.includes(a.name.toLowerCase())||0!=a.pinned){var i=document.createElement("a");i.href=a.link,i.innerText=a.name,i.classList.add("rvts_personalized_search_main-categories-item"),-1!=r.indexOf(a.name.toLowerCase())?mouseEnterWithDelay(i,()=>{var e=t[r.indexOf(a.name.toLowerCase())].productList;e.length>0&&(renderResults(e=e.map(convertProductFormat),!0),title.update(searchConfig.title),footer.hide())},500):mouseEnterWithDelay(i,()=>{searchProducts(a.name,!0).then(e=>{var t=e.results,r=e.type;renderResults(t,!0),"search"===r?(title.update(searchConfig.title),footer.hide()):"recently"===r&&(title.update(searchConfig.recentlyViewedTitle),footer.hide()),footer.hide()})},500),e.appendChild(i),0==a.pinned&&n++}})}},list:searchConfig.categories}}(),recommendedQueries=function(){var e=document.createElement("div");return e.classList.add("rvts_personalized_search_main-recommended-queries"),e.innerHTML="<div>"+searchConfig.recommendedQueriesTitle+"</div>",searchConfig.recommendedQueries.forEach(t=>{var r=document.createElement("a");r.href="/"+searchConfig.queryPattern.split("<_Query_>").join(t),r.innerText=t,r.classList.add("rvts_personalized_search_main-recommended-queries-item"),mouseEnterWithDelay(r,()=>{input.value=t,searchProducts(t,!0).then(e=>{var r=e.results,n=e.type;renderResults(r,!0),"search"===n?(title.update(searchConfig.title),footer.update(t,e.modifiedQuery)):"recently"===n&&(title.update(searchConfig.recentlyViewedTitle),footer.hide()),footer.hide()})},500),r.addEventListener("mouseup",e=>{1!==e.which&&2!==e.which||(saveLastSearch(t),saveActivity(t,custId,ACTIVITY_SEARCH))}),e.appendChild(r)}),{element:e,show:()=>{e.style.display=""},hide:()=>{e.style.display="none"},list:searchConfig.recommendedQueries}}(),footer=function(){var e=document.createElement("a");e.addEventListener("mouseup",e=>{1!==e.which&&2!==e.which||(saveLastSearch(e.target.getAttribute("keyword")),saveActivity(e.target.getAttribute("keyword"),custId,ACTIVITY_SEARCH))});var t=document.createElement("div");return t.classList.add("rvts_personalized_search-results-footer"),t.appendChild(e),{element:t,show:()=>{t.style.display=""},hide:()=>{t.style.display="none"},update:(r,n)=>{r?(currencyConfig&&currencyConfig.search_text?e.innerText=currencyConfig.search_text.split("<_Query_>").join(r):e.innerText=r+" için tüm sonuçları göster",e.setAttribute("keyword",r),e.href="/"+searchConfig.queryPattern.split("<_Query_>").join((n||r).toLowerCase()),t.style.display=""):t.style.display="none"},updateLink:r=>{e.href=r,t.style.display=""}}}(),results=function(){var e=document.createElement("div");return e.classList.add("rvts_personalized_search-results"),{element:e,show:()=>{e.style.display=""},hide:()=>{e.style.display="none"}}}();if(submitButton){var old_submit_element=submitButton,new_submit_element=old_submit_element.cloneNode(!0);old_submit_element.parentNode.replaceChild(new_submit_element,old_submit_element),submitButton=new_submit_element,submitButton.onclick=null,submitButton.addEventListener("click",function(e){e.preventDefault();var t=input.value.trim().toLowerCase();if(""!==t){saveLastSearch(t),saveActivity(t,custId,ACTIVITY_SEARCH);var r="/"+searchConfig.queryPattern.split("<_Query_>").join(t);searchConfig.redirects.forEach(e=>{if(e.query.toLowerCase()===t){var n=new URL(e.link);r=e.link,searchConfig.appendUTM&&1!=searchConfig.appendUTM||(n.search?r+="&":r+="?",r+="utm_source=revotas&utm_medium=perssearch&utm_campaign=perssearch&rvs_source=other&rvs_medium=perssearch&rvs_campaign=perssearch"),savePersSource()}}),window.location=r}})}var old_element=input,new_element=old_element.cloneNode(!0);old_element.parentNode.replaceChild(new_element,old_element),input=new_element,input.onkeydown=null,input.onkeypress=null,input.onkeyup=null,input.autocomplete="off",input.addEventListener("keypress",e=>{if("Enter"===e.key){e.preventDefault();var t=e.target.value.trim().toLowerCase();if(""===t)return;saveLastSearch(t),saveActivity(t,custId,ACTIVITY_SEARCH);var r="/"+searchConfig.queryPattern.split("<_Query_>").join(t);searchConfig.redirects.forEach(e=>{if(e.query.toLowerCase()===t){var n=new URL(e.link);r=e.link,searchConfig.appendUTM&&1!=searchConfig.appendUTM||(n.search?r+="&":r+="?",r+="utm_source=revotas&utm_medium=perssearch&utm_campaign=perssearch&rvs_source=other&rvs_medium=perssearch&rvs_campaign=perssearch"),savePersSource()}}),window.location=r}});var mainDiv=null,resultList={},filterPanel=document.createElement("div");function getScrollTop(){var e=document.documentElement,t=document.body,r="scrollTop";return e[r]||t[r]}filterPanel.classList.add("rvts_personalized_search_main-filter-element-list"),mainDiv=function(){var e=searchConfig.filterConfigs,t=document.createElement("div");t.classList.add("rvts_personalized_search_main"),t.style.position="absolute",t.style.zIndex=maxZIndex-2,t.style.display="none";var r=document.createElement("div");for(var n in r.classList.add("rvts_personalized_search_main-left-panel"),1==searchConfig.showLastSearch&&r.appendChild(lastSearch.element),categories.list.length>0&&r.appendChild(categories.element),recommendedQueries.list.length>0&&r.appendChild(recommendedQueries.element),e){var a=e[n];a.enabled&&(a.list&&a.list.length>0||a.range&&2===a.range.length)&&r.appendChild(filterBox.createFilter(a).element)}filterBox.subscribe(e=>{search_request_object={sortParam:sortParam,searchParam:""},filterPanel.innerHTML="",e.forEach(e=>{var t=e.getValues();t&&("product_price"===t.name?(search_request_object.priceMin=t.range[0],search_request_object.priceMax=t.range[1]):"top_category_id"===t.name||"category_id_2"===t.name||"category_id_3"===t.name||"category_id_4"===t.name?(search_request_object.categories||(search_request_object.categories=[]),search_request_object.categories=t.list.map(e=>({categoryName:e.string,categoryType:e.meta}))):search_request_object[t.name]=t.list.map(e=>e.string),e.getFilters().forEach(e=>{filterPanel.appendChild(e)}))}),searchKeyword(input.value)});var s=document.createElement("div");return s.classList.add("rvts_personalized_search_main-right-panel"),s.appendChild(filterPanel),s.appendChild(title.element),s.appendChild(results.element),s.appendChild(footer.element),t.appendChild(r),t.appendChild(s),document.body.appendChild(t),t}();var searchUIShown=!1;function showSearchUI(){if(!searchUIShown){var e=input.getBoundingClientRect(),t=e.bottom,r=e.left;e.top;mainDiv.style.top=t+getScrollTop()+10+"px",mainDiv.style.left=r+"px",mainDiv.style.visibility="hidden",mainDiv.style.display="",document.body.appendChild(mainDiv);var n=mainDiv.getBoundingClientRect();n.width+n.left>screen.width&&(mainDiv.style.left="",mainDiv.style.right="0px"),mainDiv.style.visibility="",searchUIShown=!0}}function hideSearchUI(){searchUIShown&&(mainDiv.remove(),searchUIShown=!1)}function renderResult(e){if(resultList[e.p_id])return resultList[e.p_id];var t=document.createElement("a");t.classList.add("rvts_personalized_search-result"),t.href=e.link,searchConfig.appendUTM&&1!=searchConfig.appendUTM||(t.href+="?utm_source=revotas&utm_medium=perssearch&utm_campaign=perssearch&rvs_source=other&rvs_medium=perssearch&rvs_campaign=perssearch"),t.setAttribute("originalHref",e.link),t.addEventListener("mouseup",function(e){1!==e.which&&2!==e.which||(savePersSource(),saveLastSearch(input.value),saveActivity(input.value,custId,ACTIVITY_CLICK,this.getAttribute("originalHref")))});var r=e.image_link,n=e.image_link.replace("-B.","-K."),a=document.createElement("img"),s=function(){this.src=r,a.removeEventListener("error",s)};a.addEventListener("error",s),a.src=n;var i=document.createElement("div");i.innerHTML=e.name;var o=document.createElement("div"),c=document.createElement("span");c.innerText=currencyConfig?formatCurrency(e.product_price,currencyConfig):e.product_price;var l=e.product_sales_price,d=null,u=document.createElement("span");return u.innerText=" - ",l&&(currencyConfig&&(l=formatCurrency(l,currencyConfig)),(d=document.createElement("span")).innerText=l,c.classList.add("original-price"),d.classList.add("sales-price")),t.appendChild(a),t.appendChild(i),d||(u.classList.add("rvts_personalized_search-dash"),o.appendChild(u)),o.appendChild(c),d&&(u.classList.add("rvts_personalized_search-sales-price-dash"),o.appendChild(u),o.appendChild(d)),t.appendChild(o),t.appendChild(document.createElement("div")),resultList[e.p_id]=t,t}function renderResults(e,t){if(e){if(!(e.length>0))return 0===e.length&&t?(showSearchUI(),title.hide(),results.hide(),void footer.hide()):void hideSearchUI();showSearchUI(),title.show(),results.show(),footer.show();var r=results.element;Array.from(r.children).forEach(e=>e.remove()),(e=(e=e.filter((e,t,r)=>r.findIndex(t=>t.image_link===e.image_link)===t).filter((e,t)=>t<searchConfig.resultLimit)).map(renderResult)).forEach(e=>r.appendChild(e))}}function searchKeyword(e){searchProducts(e).then(t=>{var r=t.results,n=t.type;renderResults(r,!0),"search"===n?(title.update(searchConfig.title),footer.update(e,t.modifiedQuery)):"recently"===n&&(title.update(searchConfig.recentlyViewedTitle),footer.hide())})}document.addEventListener("scroll",()=>{if(""!==getComputedStyle(mainDiv).display){var e=input.getBoundingClientRect(),t=e.bottom;e.left;mainDiv.style.top=t+getScrollTop()+10+"px"}});var keyUtil=keyReleaseUtil(searchKeyword),lastInputValue=null;input.addEventListener("click",e=>{keyUtil.hit(),keyUtil.release(e.target.value)}),input.addEventListener("keyup",e=>{var t=e.target.value.trim();lastInputValue!==t&&(keyUtil.hit(),keyUtil.release(t),lastInputValue=t)}),document.addEventListener("click",e=>{var t=input.getBoundingClientRect(),r=mainDiv.getBoundingClientRect(),n=t.left,a=t.width,s=t.top,i=t.height,o=r.left,c=r.width,l=r.top,d=r.height,u=e.clientX,p=e.clientY;n<=u&&n+a>=u&&s<=p&&s+i>=p||o<=u&&o+c>=u&&l<=p&&l+d>=p||hideSearchUI()})}window.addEventListener("storage",function(e){if("get_ps_session_config"===e.key&&e.newValue){var t=sessionStorage.getItem("ps_session_config");t&&(localStorage.setItem("ps_local_config",t),localStorage.removeItem("ps_local_config"))}"ps_local_config"===e.key&&e.newValue&&!psSessionConfigSet&&(sessionStorage.setItem("ps_session_config",e.newValue),psSessionConfigSet=!0,psSessionConfigResolver(e.newValue))}),localStorage.setItem("get_ps_session_config","get"),localStorage.removeItem("get_ps_session_config"),setTimeout(()=>{psSessionConfigResolver(null)},250),"complete"===document.readyState?setTimeout(function(){initializeRvtsPersSearch()},500):window.addEventListener("load",()=>{setTimeout(function(){initializeRvtsPersSearch()},500)});